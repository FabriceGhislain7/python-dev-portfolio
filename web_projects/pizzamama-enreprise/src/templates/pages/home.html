{% extends 'base.html' %}
{% load static %}

{% block titolo_pagina %}{{ titolo_pagina }}{% endblock %}

{% block meta_descrizione %}{{ descrizione_meta }}{% endblock %}

{% block contenuto_extra_head %}
<style>
    .hero-section {
        background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
        color: white;
        padding: 6rem 0;
        position: relative;
        overflow: hidden;
    }
    
    .hero-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="white" opacity="0.1"/></svg>') repeat;
        background-size: 50px 50px;
        animation: float 20s ease-in-out infinite;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
    }
    
    .stats-card {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        text-align: center;
        box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        transition: transform 0.3s ease;
    }
    
    .stats-card:hover {
        transform: translateY(-4px);
    }
    
    .feature-icon {
        font-size: 3rem;
        color: #d32f2f;
        margin-bottom: 1rem;
    }
    
    .testimonial-card {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        height: 100%;
    }
    
    .stars {
        color: #ffc107;
        font-size: 1.2rem;
        margin-bottom: 1rem;
    }
</style>
{% endblock %}

{% block contenuto %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="position-relative" style="z-index: 2;">
                    <h1 class="display-4 fw-bold mb-4">
                        {{ titolo_hero|default:"La Pizza Perfetta, Consegnata a Casa Tua" }}
                    </h1>
                    <p class="lead mb-4">
                        {{ sottotitolo_hero|default:"Ingredienti freschi, ricette tradizionali e consegna veloce in tutta la citt√†" }}
                    </p>
                    <div class="d-flex flex-wrap gap-3">
                        <a href="{{ url_catalogo|default:'/catalogo/' }}" class="btn btn-light btn-lg">
                            <i class="fas fa-pizza-slice me-2"></i>
                            {{ testo_cta|default:"Ordina Ora" }}
                        </a>
                        <a href="tel:{{ numero_telefono|default:'+39 010 123 4567' }}" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-phone me-2"></i>
                            Chiama Ora
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <div class="position-relative" style="z-index: 2;">
                    <img src="{% static 'images/hero-pizza.jpg' %}" 
                         alt="Pizza PizzaMama" 
                         class="img-fluid rounded-circle shadow-lg"
                         style="max-width: 400px; border: 8px solid rgba(255,255,255,0.2);">
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Statistiche Azienda -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row g-4">
            {% if statistiche_azienda %}
                <div class="col-lg-3 col-md-6">
                    <div class="stats-card">
                        <h3 class="text-primary mb-2">{{ statistiche_azienda.pizze_consegnate|default:"50.000+" }}</h3>
                        <p class="mb-0 text-muted">Pizze Consegnate</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stats-card">
                        <h3 class="text-primary mb-2">{{ statistiche_azienda.clienti_felici|default:"15.000+" }}</h3>
                        <p class="mb-0 text-muted">Clienti Felici</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stats-card">
                        <h3 class="text-primary mb-2">{{ statistiche_azienda.anni_esperienza|default:"5+" }}</h3>
                        <p class="mb-0 text-muted">Anni di Esperienza</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stats-card">
                        <h3 class="text-primary mb-2">{{ statistiche_azienda.citta_servite|default:"5" }}</h3>
                        <p class="mb-0 text-muted">Citt√† Servite</p>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Caratteristiche Principali -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-6 fw-bold text-primary">Perch√© Scegliere PizzaMama?</h2>
            <p class="lead text-muted">La qualit√† che fa la differenza</p>
        </div>
        
        <div class="row g-4">
            {% if caratteristiche_principali %}
                {% for caratteristica in caratteristiche_principali %}
                <div class="col-lg-3 col-md-6">
                    <div class="text-center">
                        <div class="feature-icon">{{ caratteristica.icona|default:"üçï" }}</div>
                        <h5 class="fw-bold">{{ caratteristica.titolo }}</h5>
                        <p class="text-muted">{{ caratteristica.descrizione }}</p>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <!-- Caratteristiche default -->
                <div class="col-lg-3 col-md-6">
                    <div class="text-center">
                        <div class="feature-icon">üçï</div>
                        <h5 class="fw-bold">Ricette Autentiche</h5>
                        <p class="text-muted">Ricette tradizionali della pizza napoletana</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="text-center">
                        <div class="feature-icon">üöö</div>
                        <h5 class="fw-bold">Consegna Veloce</h5>
                        <p class="text-muted">Consegna garantita in 30 minuti</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="text-center">
                        <div class="feature-icon">üçÖ</div>
                        <h5 class="fw-bold">Ingredienti Freschi</h5>
                        <p class="text-muted">Solo ingredienti di prima qualit√†</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="text-center">
                        <div class="feature-icon">üí∞</div>
                        <h5 class="fw-bold">Prezzi Onesti</h5>
                        <p class="text-muted">Qualit√† alta a prezzi accessibili</p>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Testimonianze -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-6 fw-bold text-primary">Cosa Dicono i Nostri Clienti</h2>
            <p class="lead text-muted">Le recensioni parlano da sole</p>
        </div>
        
        <div class="row g-4">
            {% if testimonianze %}
                {% for testimonianza in testimonianze %}
                <div class="col-lg-4">
                    <div class="testimonial-card">
                        <div class="stars">
                            {% for i in "12345"|slice:":"|slice:testimonianza.voto %}
                                ‚≠ê
                            {% endfor %}
                        </div>
                        <p class="mb-3">"{{ testimonianza.commento }}"</p>
                        <div class="d-flex align-items-center">
                            <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center text-white fw-bold" style="width: 40px; height: 40px;">
                                {{ testimonianza.nome|first }}
                            </div>
                            <div class="ms-3">
                                <h6 class="mb-0">{{ testimonianza.nome }}</h6>
                                <small class="text-muted">{{ testimonianza.data }}</small>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <!-- Testimonianze default -->
                <div class="col-lg-4">
                    <div class="testimonial-card">
                        <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        <p class="mb-3">"Pizza fantastica e consegna velocissima! La migliore di Genova."</p>
                        <div class="d-flex align-items-center">
                            <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center text-white fw-bold" style="width: 40px; height: 40px;">
                                M
                            </div>
                            <div class="ms-3">
                                <h6 class="mb-0">Marco R.</h6>
                                <small class="text-muted">Cliente verificato</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="testimonial-card">
                        <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        <p class="mb-3">"Ingredienti freschi e qualit√† eccellente. Super consigliata!"</p>
                        <div class="d-flex align-items-center">
                            <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center text-white fw-bold" style="width: 40px; height: 40px;">
                                L
                            </div>
                            <div class="ms-3">
                                <h6 class="mb-0">Laura M.</h6>
                                <small class="text-muted">Cliente verificato</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="testimonial-card">
                        <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        <p class="mb-3">"Servizio impeccabile e pizze deliziose. Ordino spesso qui."</p>
                        <div class="d-flex align-items-center">
                            <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center text-white fw-bold" style="width: 40px; height: 40px;">
                                A
                            </div>
                            <div class="ms-3">
                                <h6 class="mb-0">Alessandro T.</h6>
                                <small class="text-muted">Cliente verificato</small>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Call to Action Finale -->
<section class="py-5 bg-primary text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h2 class="fw-bold mb-3">Pronto per la Tua Pizza Perfetta?</h2>
                <p class="lead mb-0">Ordina ora e ricevila in 30 minuti. Consegna gratuita sopra i 20‚Ç¨!</p>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a href="{{ url_catalogo|default:'/catalogo/' }}" class="btn btn-light btn-lg">
                    <i class="fas fa-pizza-slice me-2"></i>
                    Ordina Adesso
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Container per messaggi sistema -->
<div id="messaggi-sistema" class="container mt-3"></div>
{% endblock %}

{% block script_extra %}
<script>
// JavaScript per homepage
document.addEventListener('DOMContentLoaded', function() {
    // Animazione contatori statistiche
    const animateCounters = () => {
        const counters = document.querySelectorAll('.stats-card h3');
        
        counters.forEach(counter => {
            const target = counter.textContent.replace(/[^\d]/g, '');
            if (target) {
                let current = 0;
                const increment = target / 50;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        counter.textContent = counter.textContent.replace(/[\d,]+/, target.toLocaleString());
                        clearInterval(timer);
                    } else {
                        const formatted = Math.floor(current).toLocaleString();
                        counter.textContent = counter.textContent.replace(/[\d,]+/, formatted);
                    }
                }, 40);
            }
        });
    };
    
    // Osserva quando la sezione statistiche entra in vista
    const statsSection = document.querySelector('.stats-card');
    if (statsSection) {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateCounters();
                    observer.unobserve(entry.target);
                }
            });
        });
        observer.observe(statsSection);
    }
    
    // Smooth scroll per i link interni
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
});

console.log('üçï PizzaMama Homepage caricata con successo!');
</script>
{% endblock %}